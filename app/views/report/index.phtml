<?php use Phalcon\Tag as Tag ?>

<input type="hidden" id="reportSummaryUserId" value="<?php echo $reportSummaryUserId; ?>">
<input type="hidden" id="reportSummaryStartDate" value="<?php echo $reportSummaryStartDate; ?>">
<input type="hidden" id="reportSummaryAjaxUrl" value="<?php echo $this->url->get('report/getsummaryajax'); ?>">
<input type="hidden" id="reportSummaryPrevAjaxUrl" value="<?php echo $this->url->get('report/getajaxreportprev'); ?>">
<input type="hidden" id="reportSummaryNextAjaxUrl" value="<?php echo $this->url->get('report/getajaxreportnext'); ?>">

<?php if ($currentUser->isAdmin()) { ?>
    <div class="span3">
        <ul class="nav nav-tabs nav-stacked">
            <?php foreach ($allUsers AS $user) { ?>
                <li class="<?php echo ($user->id == $reportSummaryUserId) ? 'active' : ''; ?>">
                    <a href="<?php echo $this->url->get('report/index/' . $user->id); ?>" class="a-show-loader"><?php echo $user->full_name; ?></a>
                </li>
            <?php } ?>
        </ul>
    </div>
<?php } ?>

<div class="<?php echo ($currentUser->isAdmin()) ? 'span9' : 'span12'; ?>">
    <?php if (!is_null($attendanceStat)) { ?>
        <p class="pull-right">
            <select id="generateSummarySelect" class="input-small">
                <option value="0" selected="selected">All Time</option>

                <?php foreach($attendanceStat['reportMonths'] AS $reportMonthLabel => $reportMonthValue) { ?>
                    <option value="<?php echo $reportMonthValue; ?>">
                        <?php echo $reportMonthLabel; ?>
                    </option>
                <?php } ?>
            </select>
        </p>
    <?php } ?>
    <?php if ($currentUser->id == $reportSummaryUser->id) { ?>
        <h4 class="header">Your Summary</h4>
    <?php } else { ?>
        <h4 class="header">Summary for <?php echo $reportSummaryUser->full_name; ?></h4>
    <?php } ?>

    <div id="reportSummaryLoading">
        <h4>
            <i class="icon-spinner icon-spin icon-4x"></i>
        </h4>
    </div>

    <div id="reportSummaryText">
        <?php $this->partial('partials/report_summary_text'); ?>
    </div>

    <br>
    <br>
    <br>

    <span class="pull-right">
        <button id="reportSummaryChartsPrev" class="btn btn-small">Prev</button>
        &nbsp;
        <button id="reportSummaryChartsNext" class="btn btn-small">Next</button>
    </span>
    <div id="reportSummaryCharts">
        <h4 class="header">
            Charts (Between <span id="reportSummaryBetween"><?php echo $reportSummaryStartDate; ?> to <?php echo $reportSummaryEndDate; ?></span>)
        </h4>
        <div id="reportSummaryChartsLoading">
            <h4>
                <i class="icon-spinner icon-spin icon-4x"></i>
            </h4>
        </div>

        <div id="reportSummaryChartsContent">
            <?php $this->partial('partials/report_summary_charts'); ?>
        </div>
    </div>
</div>